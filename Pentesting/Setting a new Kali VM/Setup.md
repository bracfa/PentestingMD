# Setting up a new Kali VM

1. Download the Kali VM for vmware
	1. Verify the checksum
	2. Unzip: `7za x kali-linux-2021.2-vmware-amd64.7z`
	3. Go to File Explorer, double-click and choose which will open on 'I copied it'. This will open vmware
	4. Change sudo password: `passwd`
2. [Update Kali](https://www.kali.org/docs/general-use/updating-kali/). 
	1. 1. Ensure you have both lines for deb and deb-src in `/etc/apt/sources.list`
	2. 1. `sudo apt update`
	3. 2. `sudo apt full-upgrade -y`
3. Shutdown Kali VM
4. On VMware, change ram to 8192 MB
5. Change the default shell to bash `usermod --shell /bin/bash kali`
6. On Kali VM, ensure that ssh and openssh-server are installed `dpkg -s openssh-server`
7. 4. Download the Github repos
8. Configure SSH keys to work with Git:
	1. [Generate new ssh keys](https://www.thesecurityblogger.com/enable-ssh-on-kali-linux/.) Set a passphrase
	2. [Connect to github using SSH](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh
	3. Test the ssh on all repositories
9. Copy the .vimrc and .bashrc, and .bash_aliases to the new VM.
10. Setup a virtual environment for python3 and python2. Try researching this website [virtualenvwrapper](https://virtualenvwrapper.readthedocs.io/en/latest/)
	1. Install pip3 `sudo apt-get -y install python-pip3`
	2. Install pipx `sudo apt install pipx`. There was a message saying to add to the PATH to .bashrc `PATH="$PATH:$HOME/.local/bin"`.
	3. Install [virtualenv](https://virtualenv.pypa.io/en/latest/installation.html) using pipx `pipx install virtualenv`. HOWEVER, you may get an error message saying to first download python3-venv `sudo apt-get install python3-venv`
	4. Install [virtualenvwrapper](https://virtualenvwrapper.readthedocs.io/en/latest/) `pip install virtualenvwrapper`
	6. Update bash.rc
	```bash
	# Virtual environment variables
	export WORKON_HOME=$HOME/.virtualenvs
	export PROJECT_HOME=$HOME/GitWorkspace/oscpPrep/python-virtual-envs
	export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3
	source /home/kali/.local/bin/virtualenvwrapper.sh
	```
11. Download the OSCP PDF and exercises
12. Download the VPNs for Proving Grounds, HTB, etc and create the appropriate directories/files
13. Sign in to Firefox, gmail, pg
14. Move the control panel icons
15. Set power so that it never turns off
16. Add extra programs such as gobuster, telnet, nessus, Burp